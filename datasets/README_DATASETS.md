# راهنمای ساخت مجموعه‌داده فارسی KURDO-AI

این پوشه شامل منابع متنی برای آموزش ماژول‌های دانش، زبان و قابلیت‌سنجی است. لطفاً اصول زیر رعایت شود:

## اصول حقوقی و اخلاقی

- **مقررات ملی ساختمان، آیین‌نامه 2800، استاندارد ملی، PDFهای رسمی**: حقوق نشر دارند؛ *تمام متن را کپی نکنید*. فقط متادیتا، خلاصه تحلیلی خودنویس، استخراج ساختار (شماره فصل، تیترها) یا ارجاع ذخیره شود.
- **سایت‌های مقاله (Archline, خط معمار, civil808, IranSaze Forum, Arel, DesignPlus, Urbanity.ir)**: بررسی robots.txt قبل از خزیدن؛ نرخ درخواست پایین (حداقل 3 ثانیه فاصله).
- **فروم‌ها**: محتوای کاربران دارای حقوق؛ خلاصه خودنویس و کلیدواژه ذخیره کنید.
- اگر منبع لایسنس محدود دارد، فقط URL + تاریخ برداشت + هشتگ‌های موضوعی ذخیره شود.

## ساختار پوشه‌ها

```
architecture/          مقالات، پروژه‌ها، کانسپت‌ها (متن پاکسازی‌شده)
structure/             مباحث سازه، آیین‌نامه‌ای (خلاصه + متادیتا)
urban_planning/        شهرسازی، کاربری زمین، TOD، حمل و نقل
vocab/                 واژگان تخصصی + نگاشت انگلیسی→فارسی→رده
raw/                   (اختیاری) فایل‌های خام قبل از پاکسازی
processed/             خروجی نهایی پس از نرمال‌سازی
```

## فرمت فایل متنی (Corpus)

هر خط یک سند JSON فشرده:

```json
{"id":"archline_2025_001","source":"archline.ir","url":"https://archline.ir/...","lang":"fa","title":"...","tags":["مسکونی","پایداری"],"body":"متن تمیزشده بدون HTML","created":"2025-11-21"}
```

## واژگان تخصصی (vocab/*.json)

```json
{"term":"پایداری","category":"معماری","english":"sustainability","variants":["پایداری","سازگاری زیست‌محیطی"],"weight":0.92}
```

## پاکسازی متن

1. حذف HTML، اسکریپت، استایل
2. حذف کاراکترهای کنترل و تکرار فاصله
3. نرمال‌سازی نیم‌فاصله: تبدیل "می ها" → "می‌ها" در صورت نیاز
4. حذف ایمیل، شماره تماس (حفاظت داده شخصی)
5. حد آستانه طول: اسناد < 200 کاراکتر حذف

## نرمال‌سازی زبان

- تبدیل اعداد به فرم استاندارد (۱۲۳ → 123 یا برعکس طبق نیاز مدل)
- یکسان‌سازی ی / ک (ي، ك) به (ی، ک)
- حذف نیم‌فاصله‌های شکسته

## برچسب‌گذاری موضوعی پیشنهادی

معماری: {"کاربری": ["مسکونی","اداری","تجاری"], "مقیاس": ["برج","ویلا"], "رویکرد": ["پارامتریک","بیوفیلیک","مینیمال"]}
سازه: {"سیستم": ["بتنی","فولادی"], "تحلیل": ["بارگذاری","زلزله","خستگی"], "مقاوم‌سازی": ["ژاکت","FRP"]}
شهرسازی: {"حمل و نقل": ["TOD","BRT"], "طرح": ["جامع","تفصیلی"], "محیطی": ["فضای سبز","تاب‌آوری"]}

## متادیتا حساس

برای آیین‌نامه‌ها فقط:

```json
{"id":"code_2800_edition4","type":"standard","title":"آیین‌نامه 2800 ایران","sections":["فصل 1 کلیات","فصل 2 معیارها"],"url":"http://...","license":"حقوق نشر محفوظ","extracted":"2025-11-21"}
```

## امنیت و کیفیت

- لاگ درخواست‌های خزنده در `datasets/crawler_log.csv`
- تشخیص زبان: اگر درصد کاراکترهای غیر فارسی > 40% → برچسب `mixed`.
- ضد تکرار: هش SHA256 متن؛ اگر تکراری بود رد.

## فرآیند آموزش

1. اجرای خزنده محدود (نمونه) → تولید فایل‌های JSON خطی در architecture/processed
2. ادغام همه خطوط در `datasets/merged_corpus.jsonl`
3. فراخوانی `train_system()` با مسیر فایل: افزایش دانش.
4. به‌روزرسانی ماژول زبان: استخراج واژگان پرتکرار، افزودن به `vocab/domain_architecture.json`

## هشدار

این راهنما صرفاً چارچوب فنی است؛ مسئولیت رعایت حقوق نشر و قوانین با استفاده‌کننده است.
