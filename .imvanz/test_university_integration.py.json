[
  {
    "timestamp": "2025-11-21T23:14:30.400Z",
    "fileName": "test_university_integration.py",
    "content": "\"\"\"\r\nUniversity Knowledge Integration - ادغام دانش دانشگاهی با RAG\r\n\r\nاتصال ایجنت‌های دانشگاهی به سیستم RAG برای یادگیری مداوم\r\n\"\"\"\r\n\r\nimport io\r\nimport sys\r\nimport os\r\nimport logging\r\n\r\nsys.stdout = io.TextIOWrapper(sys.stdout.buffer, encoding='utf-8')\r\nsys.path.append(os.path.dirname(os.path.dirname(__file__)))\r\n\r\nfrom cad3d.super_ai.university_config import UNIVERSITIES, AGENT_CONFIG\r\nfrom cad3d.super_ai.university_agents import UniversityAgentManager\r\nfrom cad3d.super_ai.rag_system import RAGSystem\r\n\r\n# Setup logging\r\nlogging.basicConfig(\r\n    level=logging.INFO,\r\n    format='%(message)s'\r\n)\r\nlogger = logging.getLogger(__name__)\r\n\r\nclass UniversityKnowledgeIntegration:\r\n    \"\"\"\r\n    سیستم یکپارچه برای یادگیری از دانشگاه‌ها و ادغام با RAG\r\n    \"\"\"\r\n    \r\n    def __init__(self):\r\n        logger.info(\"\\n\" + \"=\"*80)\r\n        logger.info(\"  UNIVERSITY KNOWLEDGE INTEGRATION SYSTEM\")\r\n        logger.info(\"  سیستم یادگیری از دانشگاه‌های برتر دنیا\")\r\n        logger.info(\"=\"*80 + \"\\n\")\r\n        \r\n        # Initialize RAG system\r\n        logger.info(\"Step 1: Initializing RAG System...\")\r\n        self.rag_system = RAGSystem()\r\n        logger.info(\"✓ RAG System ready\\n\")\r\n        \r\n        # Initialize agent manager\r\n        logger.info(\"Step 2: Initializing University Agents...\")\r\n        self.agent_manager = UniversityAgentManager(\r\n            UNIVERSITIES,\r\n            AGENT_CONFIG,\r\n            self.rag_system\r\n        )\r\n        logger.info(\"✓ All agents ready\\n\")\r\n    \r\n    def show_universities(self):\r\n        \"\"\"نمایش لیست دانشگاه‌ها\"\"\"\r\n        logger.info(\"\\n\" + \"=\"*80)\r\n        logger.info(\"  AVAILABLE UNIVERSITIES\")\r\n        logger.info(\"=\"*80 + \"\\n\")\r\n        \r\n        for i, (key, info) in enumerate(UNIVERSITIES.items(), 1):\r\n            logger.info(f\"{i}. {info['name']}\")\r\n            logger.info(f\"   Country: {info['country']}\")\r\n            logger.info(f\"   Rank: #{info['rank']}\")\r\n            logger.info(f\"   Focus: {', '.join(info['focus_areas'][:3])}\")\r\n            logger.info(f\"   Resources: {len(info['resources'])} sources\")\r\n            logger.info(\"\")\r\n    \r\n    def demo_single_university(self, university_key: str = \"MIT\"):\r\n        \"\"\"\r\n        دمو: یادگیری از یک دانشگاه\r\n        \r\n        Args:\r\n            university_key: کلید دانشگاه (مثلا \"MIT\")\r\n        \"\"\"\r\n        logger.info(\"\\n\" + \"=\"*80)\r\n        logger.info(f\"  DEMO: Learning from {UNIVERSITIES[university_key]['name']}\")\r\n        logger.info(\"=\"*80 + \"\\n\")\r\n        \r\n        # یادگیری\r\n        result = self.agent_manager.learn_from_specific([university_key])\r\n        \r\n        # نمایش نتیجه\r\n        if result['results']:\r\n            stats = result['results'][0]\r\n            logger.info(\"\\n  Results:\")\r\n            logger.info(f\"  Status: {stats['status']}\")\r\n            logger.info(f\"  Pages scraped: {stats['pages_scraped']}\")\r\n            logger.info(f\"  Documents processed: {stats['documents_processed']}\")\r\n            logger.info(f\"  Documents added to RAG: {stats['documents_added_to_rag']}\")\r\n        \r\n        return result\r\n    \r\n    def learn_from_top_5(self):\r\n        \"\"\"یادگیری از 5 دانشگاه برتر\"\"\"\r\n        logger.info(\"\\n\" + \"=\"*80)\r\n        logger.info(\"  Learning from Top 5 Universities\")\r\n        logger.info(\"=\"*80 + \"\\n\")\r\n        \r\n        top_5 = [\"MIT\", \"Stanford\", \"Cambridge\", \"Oxford\", \"Berkeley\"]\r\n        result = self.agent_manager.learn_from_specific(top_5)\r\n        \r\n        logger.info(\"\\n  Summary:\")\r\n        logger.info(f\"  Agents updated: {result['agents_updated']}\")\r\n        logger.info(f\"  Total documents: {sum(r['documents_added_to_rag'] for r in result['results'])}\")\r\n        \r\n        return result\r\n    \r\n    def learn_from_all(self):\r\n        \"\"\"یادگیری از همه دانشگاه‌ها\"\"\"\r\n        logger.info(\"\\n\" + \"=\"*80)\r\n        logger.info(\"  Learning from ALL Universities\")\r\n        logger.info(\"=\"*80 + \"\\n\")\r\n        \r\n        return self.agent_manager.learn_from_all()\r\n    \r\n    def show_statistics(self):\r\n        \"\"\"نمایش آمار سیستم\"\"\"\r\n        stats = self.agent_manager.get_statistics()\r\n        \r\n        logger.info(\"\\n\" + \"=\"*80)\r\n        logger.info(\"  SYSTEM STATISTICS\")\r\n        logger.info(\"=\"*80 + \"\\n\")\r\n        \r\n        logger.info(f\"Total Agents: {stats['total_agents']}\")\r\n        logger.info(f\"Agents Needing Update: {stats['agents_needing_update']}\")\r\n        logger.info(f\"Total Documents Collected: {stats['total_documents_collected']}\")\r\n        logger.info(f\"Total Pages Scraped: {stats['total_pages_scraped']}\")\r\n        \r\n        logger.info(\"\\n  By University:\")\r\n        for uni, data in stats['by_university'].items():\r\n            logger.info(f\"\\n  {uni}:\")\r\n            logger.info(f\"    Country: {data['country']}\")\r\n            logger.info(f\"    Documents: {data['documents']}\")\r\n            logger.info(f\"    Pages: {data['pages']}\")\r\n            logger.info(f\"    Last Update: {data['last_update'] or 'Never'}\")\r\n        \r\n        return stats\r\n    \r\n    def test_rag_query(self, query: str):\r\n        \"\"\"\r\n        تست پرسش از RAG با دانش دانشگاهی\r\n        \r\n        Args:\r\n            query: پرسش\r\n        \"\"\"\r\n        logger.info(\"\\n\" + \"=\"*80)\r\n        logger.info(f\"  Testing RAG Query\")\r\n        logger.info(\"=\"*80 + \"\\n\")\r\n        \r\n        logger.info(f\"Query: {query}\")\r\n        \r\n        # پرسش از RAG\r\n        results = self.rag_system.search(query, top_k=3)\r\n        \r\n        logger.info(f\"\\n  Found {len(results)} relevant documents:\")\r\n        for i, result in enumerate(results, 1):\r\n            logger.info(f\"\\n  {i}. Score: {result['score']:.4f}\")\r\n            logger.info(f\"     University: {result['metadata'].get('university', 'Unknown')}\")\r\n            logger.info(f\"     Resource: {result['metadata'].get('resource', 'Unknown')}\")\r\n            logger.info(f\"     URL: {result['metadata'].get('url', 'Unknown')}\")\r\n            logger.info(f\"     Content preview: {result['content'][:200]}...\")\r\n        \r\n        return results\r\n\r\n\r\ndef main():\r\n    \"\"\"اجرای دمو\"\"\"\r\n    \r\n    # Initialize system\r\n    system = UniversityKnowledgeIntegration()\r\n    \r\n    # نمایش دانشگاه‌ها\r\n    system.show_universities()\r\n    \r\n    # دمو: یادگیری از MIT\r\n    logger.info(\"\\n\" + \"=\"*80)\r\n    logger.info(\"  DEMO MODE: Quick Test with Limited Data\")\r\n    logger.info(\"  (For full collection, run learn_from_all())\")\r\n    logger.info(\"=\"*80 + \"\\n\")\r\n    \r\n    # یادگیری از MIT (محدود)\r\n    result = system.demo_single_university(\"MIT\")\r\n    \r\n    # نمایش آمار\r\n    system.show_statistics()\r\n    \r\n    # تست پرسش\r\n    if result['results'] and result['results'][0]['documents_added_to_rag'] > 0:\r\n        system.test_rag_query(\"artificial intelligence research\")\r\n    \r\n    logger.info(\"\\n\" + \"=\"*80)\r\n    logger.info(\"  INTEGRATION COMPLETE\")\r\n    logger.info(\"=\"*80 + \"\\n\")\r\n    \r\n    logger.info(\"Next Steps:\")\r\n    logger.info(\"  1. Run learn_from_top_5() for more universities\")\r\n    logger.info(\"  2. Run learn_from_all() for complete collection\")\r\n    logger.info(\"  3. Set up scheduler for automatic updates\")\r\n    logger.info(\"  4. Integrate with UnifiedAISystem for queries\")\r\n    logger.info(\"\")\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n",
    "format": "py"
  },
  {
    "timestamp": "2025-11-21T23:14:32.007Z",
    "fileName": "test_university_integration.py",
    "content": "\"\"\"\r\nUniversity Knowledge Integration - ادغام دانش دانشگاهی با RAG\r\n\r\nاتصال ایجنت‌های دانشگاهی به سیستم RAG برای یادگیری مداوم\r\n\"\"\"\r\n\r\nimport io\r\nimport sys\r\nimport os\r\nimport logging\r\n\r\nsys.stdout = io.TextIOWrapper(sys.stdout.buffer, encoding='utf-8')\r\nsys.path.append(os.path.dirname(os.path.dirname(__file__)))\r\n\r\nfrom cad3d.super_ai.university_config import UNIVERSITIES, AGENT_CONFIG\r\nfrom cad3d.super_ai.university_agents import UniversityAgentManager\r\nfrom cad3d.super_ai.rag_system import RAGSystem\r\n\r\n# Setup logging\r\nlogging.basicConfig(\r\n    level=logging.INFO,\r\n    format='%(message)s'\r\n)\r\nlogger = logging.getLogger(__name__)\r\n\r\nclass UniversityKnowledgeIntegration:\r\n    \"\"\"\r\n    سیستم یکپارچه برای یادگیری از دانشگاه‌ها و ادغام با RAG\r\n    \"\"\"\r\n    \r\n    def __init__(self):\r\n        logger.info(\"\\n\" + \"=\"*80)\r\n        logger.info(\"  UNIVERSITY KNOWLEDGE INTEGRATION SYSTEM\")\r\n        logger.info(\"  سیستم یادگیری از دانشگاه‌های برتر دنیا\")\r\n        logger.info(\"=\"*80 + \"\\n\")\r\n        \r\n        # Initialize RAG system\r\n        logger.info(\"Step 1: Initializing RAG System...\")\r\n        self.rag_system = RAGSystem()\r\n        logger.info(\"✓ RAG System ready\\n\")\r\n        \r\n        # Initialize agent manager\r\n        logger.info(\"Step 2: Initializing University Agents...\")\r\n        self.agent_manager = UniversityAgentManager(\r\n            UNIVERSITIES,\r\n            AGENT_CONFIG,\r\n            self.rag_system\r\n        )\r\n        logger.info(\"✓ All agents ready\\n\")\r\n    \r\n    def show_universities(self):\r\n        \"\"\"نمایش لیست دانشگاه‌ها\"\"\"\r\n        logger.info(\"\\n\" + \"=\"*80)\r\n        logger.info(\"  AVAILABLE UNIVERSITIES\")\r\n        logger.info(\"=\"*80 + \"\\n\")\r\n        \r\n        for i, (key, info) in enumerate(UNIVERSITIES.items(), 1):\r\n            logger.info(f\"{i}. {info['name']}\")\r\n            logger.info(f\"   Country: {info['country']}\")\r\n            logger.info(f\"   Rank: #{info['rank']}\")\r\n            logger.info(f\"   Focus: {', '.join(info['focus_areas'][:3])}\")\r\n            logger.info(f\"   Resources: {len(info['resources'])} sources\")\r\n            logger.info(\"\")\r\n    \r\n    def demo_single_university(self, university_key: str = \"MIT\"):\r\n        \"\"\"\r\n        دمو: یادگیری از یک دانشگاه\r\n        \r\n        Args:\r\n            university_key: کلید دانشگاه (مثلا \"MIT\")\r\n        \"\"\"\r\n        logger.info(\"\\n\" + \"=\"*80)\r\n        logger.info(f\"  DEMO: Learning from {UNIVERSITIES[university_key]['name']}\")\r\n        logger.info(\"=\"*80 + \"\\n\")\r\n        \r\n        # یادگیری\r\n        result = self.agent_manager.learn_from_specific([university_key])\r\n        \r\n        # نمایش نتیجه\r\n        if result['results']:\r\n            stats = result['results'][0]\r\n            logger.info(\"\\n  Results:\")\r\n            logger.info(f\"  Status: {stats['status']}\")\r\n            logger.info(f\"  Pages scraped: {stats['pages_scraped']}\")\r\n            logger.info(f\"  Documents processed: {stats['documents_processed']}\")\r\n            logger.info(f\"  Documents added to RAG: {stats['documents_added_to_rag']}\")\r\n        \r\n        return result\r\n    \r\n    def learn_from_top_5(self):\r\n        \"\"\"یادگیری از 5 دانشگاه برتر\"\"\"\r\n        logger.info(\"\\n\" + \"=\"*80)\r\n        logger.info(\"  Learning from Top 5 Universities\")\r\n        logger.info(\"=\"*80 + \"\\n\")\r\n        \r\n        top_5 = [\"MIT\", \"Stanford\", \"Cambridge\", \"Oxford\", \"Berkeley\"]\r\n        result = self.agent_manager.learn_from_specific(top_5)\r\n        \r\n        logger.info(\"\\n  Summary:\")\r\n        logger.info(f\"  Agents updated: {result['agents_updated']}\")\r\n        logger.info(f\"  Total documents: {sum(r['documents_added_to_rag'] for r in result['results'])}\")\r\n        \r\n        return result\r\n    \r\n    def learn_from_all(self):\r\n        \"\"\"یادگیری از همه دانشگاه‌ها\"\"\"\r\n        logger.info(\"\\n\" + \"=\"*80)\r\n        logger.info(\"  Learning from ALL Universities\")\r\n        logger.info(\"=\"*80 + \"\\n\")\r\n        \r\n        return self.agent_manager.learn_from_all()\r\n    \r\n    def show_statistics(self):\r\n        \"\"\"نمایش آمار سیستم\"\"\"\r\n        stats = self.agent_manager.get_statistics()\r\n        \r\n        logger.info(\"\\n\" + \"=\"*80)\r\n        logger.info(\"  SYSTEM STATISTICS\")\r\n        logger.info(\"=\"*80 + \"\\n\")\r\n        \r\n        logger.info(f\"Total Agents: {stats['total_agents']}\")\r\n        logger.info(f\"Agents Needing Update: {stats['agents_needing_update']}\")\r\n        logger.info(f\"Total Documents Collected: {stats['total_documents_collected']}\")\r\n        logger.info(f\"Total Pages Scraped: {stats['total_pages_scraped']}\")\r\n        \r\n        logger.info(\"\\n  By University:\")\r\n        for uni, data in stats['by_university'].items():\r\n            logger.info(f\"\\n  {uni}:\")\r\n            logger.info(f\"    Country: {data['country']}\")\r\n            logger.info(f\"    Documents: {data['documents']}\")\r\n            logger.info(f\"    Pages: {data['pages']}\")\r\n            logger.info(f\"    Last Update: {data['last_update'] or 'Never'}\")\r\n        \r\n        return stats\r\n    \r\n    def test_rag_query(self, query: str):\r\n        \"\"\"\r\n        تست پرسش از RAG با دانش دانشگاهی\r\n        \r\n        Args:\r\n            query: پرسش\r\n        \"\"\"\r\n        logger.info(\"\\n\" + \"=\"*80)\r\n        logger.info(f\"  Testing RAG Query\")\r\n        logger.info(\"=\"*80 + \"\\n\")\r\n        \r\n        logger.info(f\"Query: {query}\")\r\n        \r\n        # پرسش از RAG\r\n        results = self.rag_system.search(query, top_k=3)\r\n        \r\n        logger.info(f\"\\n  Found {len(results)} relevant documents:\")\r\n        for i, result in enumerate(results, 1):\r\n            logger.info(f\"\\n  {i}. Score: {result['score']:.4f}\")\r\n            logger.info(f\"     University: {result['metadata'].get('university', 'Unknown')}\")\r\n            logger.info(f\"     Resource: {result['metadata'].get('resource', 'Unknown')}\")\r\n            logger.info(f\"     URL: {result['metadata'].get('url', 'Unknown')}\")\r\n            logger.info(f\"     Content preview: {result['content'][:200]}...\")\r\n        \r\n        return results\r\n\r\n\r\ndef main():\r\n    \"\"\"اجرای دمو\"\"\"\r\n    \r\n    # Initialize system\r\n    system = UniversityKnowledgeIntegration()\r\n    \r\n    # نمایش دانشگاه‌ها\r\n    system.show_universities()\r\n    \r\n    # دمو: یادگیری از MIT\r\n    logger.info(\"\\n\" + \"=\"*80)\r\n    logger.info(\"  DEMO MODE: Quick Test with Limited Data\")\r\n    logger.info(\"  (For full collection, run learn_from_all())\")\r\n    logger.info(\"=\"*80 + \"\\n\")\r\n    \r\n    # یادگیری از MIT (محدود)\r\n    result = system.demo_single_university(\"MIT\")\r\n    \r\n    # نمایش آمار\r\n    system.show_statistics()\r\n    \r\n    # تست پرسش\r\n    if result['results'] and result['results'][0]['documents_added_to_rag'] > 0:\r\n        system.test_rag_query(\"artificial intelligence research\")\r\n    \r\n    logger.info(\"\\n\" + \"=\"*80)\r\n    logger.info(\"  INTEGRATION COMPLETE\")\r\n    logger.info(\"=\"*80 + \"\\n\")\r\n    \r\n    logger.info(\"Next Steps:\")\r\n    logger.info(\"  1. Run learn_from_top_5() for more universities\")\r\n    logger.info(\"  2. Run learn_from_all() for complete collection\")\r\n    logger.info(\"  3. Set up scheduler for automatic updates\")\r\n    logger.info(\"  4. Integrate with UnifiedAISystem for queries\")\r\n    logger.info(\"\")\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n",
    "format": "py"
  }
]